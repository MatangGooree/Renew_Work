{"ast":null,"code":"import React from'react';import{useAuth}from'../Contexts/Auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const shifts=['○','●▣','X','XX'];// 주간, 야간, 비번, 휴무\nfunction ScheduleTable(_ref){let{scheduleData,getWorkers}=_ref;const{user}=useAuth();// 1. scheduleData가 객체이므로, 내부 키로 존재하는지 확인합니다.\nif(!scheduleData||!scheduleData.DayInfo||!scheduleData.ScheduleInfo){return null;// 또는 <p>Loading...</p>\n}const summitVacation=async(shift,day,id)=>{console.log(user.id);console.log(id);if(user.id.toString()!==id.toString()){alert('본인의 휴가만 신청 가능합니다');}let schedule;if(shift==='○'){schedule='day';}else if(shift==='●▣'){schedule='night';}else{return;}const date=new Date(scheduleData.year,scheduleData.month,day);const vacData={worker_ID:user.id,date:date,schedule};const response=await fetch(\"/api/summitVacation\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(vacData),credentials:'include'});if(response.status===200){getWorkers();}else{}};return/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white rounded-lg shadow\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 border-collapse\",children:[/*#__PURE__*/_jsxs(\"thead\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{rowSpan:\"2\",className:\"sticky left-0 bg-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider z-20 align-middle border-b border-gray-200\",children:\"\\uADFC\\uBB34\\uC790\"}),scheduleData.DayInfo.map((_,index)=>/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-center text-xs font-bold uppercase tracking-wider transition-colors duration-200\",children:index+1},\"date-\".concat(index)))]}),/*#__PURE__*/_jsx(\"tr\",{children:scheduleData.DayInfo.map((_ref2,index)=>{let{dayString,isWeekend}=_ref2;return/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-center text-xs font-bold uppercase tracking-wider border-b border-gray-200 transition-colors duration-200 \".concat(isWeekend?'text-red-600':'text-gray-600'),children:dayString},\"day-\".concat(index));})})]}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white \",children:scheduleData.WorkerData.map((worker,workerIndex)=>{if(worker.worker_ID<4){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"sticky left-0 bg-gray-200 px-4 py-3 whitespace-nowrap text-sm font-semibold text-gray-900 z-10 border-r\",children:worker.name}),worker.scheduleTime.map((Time,dayIndex)=>{return/*#__PURE__*/_jsx(\"td\",{className:\"border-b\",onDoubleClick:()=>{summitVacation(shift,dayIndex+1,worker.worker.name);},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex items-center justify-center py-3 text-sm \".concat(scheduleData.DayInfo[dayIndex].isWeekend||scheduleData.DayInfo[dayIndex].isHoliday?'bg-red-50 text-red-700':'bg-white text-gray-700'),children:Time})},\"cell-\".concat(workerIndex,\"-\").concat(dayIndex));})]},\"worker-\".concat(workerIndex));}})})]})});}export default ScheduleTable;","map":{"version":3,"names":["React","useAuth","jsx","_jsx","jsxs","_jsxs","shifts","ScheduleTable","_ref","scheduleData","getWorkers","user","DayInfo","ScheduleInfo","summitVacation","shift","day","id","console","log","toString","alert","schedule","date","Date","year","month","vacData","worker_ID","response","fetch","method","headers","body","JSON","stringify","credentials","status","className","children","rowSpan","map","_","index","concat","_ref2","dayString","isWeekend","WorkerData","worker","workerIndex","name","scheduleTime","Time","dayIndex","onDoubleClick","isHoliday"],"sources":["/Users/HJ/Desktop/projectes/Renew_schedule/renew_schdule/client/src/Components/ScheduleTable.jsx"],"sourcesContent":["import React from 'react'\nimport { useAuth } from '../Contexts/Auth'\nconst shifts = ['○', '●▣', 'X', 'XX'] // 주간, 야간, 비번, 휴무\n\nfunction ScheduleTable({ scheduleData, getWorkers }) {\n  const { user } = useAuth()\n\n  // 1. scheduleData가 객체이므로, 내부 키로 존재하는지 확인합니다.\n  if (!scheduleData || !scheduleData.DayInfo || !scheduleData.ScheduleInfo) {\n    return null // 또는 <p>Loading...</p>\n  }\n\n  const summitVacation = async (shift, day, id) => {\n    console.log(user.id)\n    console.log(id)\n    if (user.id.toString() !== id.toString()) {\n      alert('본인의 휴가만 신청 가능합니다')\n    }\n    let schedule\n    if (shift === '○') {\n      schedule = 'day'\n    } else if (shift === '●▣') {\n      schedule = 'night'\n    } else {\n      return\n    }\n\n    const date = new Date(scheduleData.year, scheduleData.month, day)\n    const vacData = {\n      worker_ID: user.id,\n      date: date,\n      schedule,\n    }\n    const response = await fetch(`/api/summitVacation`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(vacData),\n      credentials: 'include',\n    })\n    if (response.status === 200) {\n      getWorkers()\n    } else {\n    }\n  }\n\n  return (\n    <div className='overflow-x-auto bg-white rounded-lg shadow'>\n      <table className='min-w-full divide-y divide-gray-200 border-collapse'>\n        <thead className='bg-gray-100'>\n          <tr>\n            {/* 근무자 (고정 헤더) */}\n            <th\n              rowSpan='2'\n              className='sticky left-0 bg-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider z-20 align-middle border-b border-gray-200'\n            >\n              근무자\n            </th>\n\n            {scheduleData.DayInfo.map((_, index) => (\n              <th\n                key={`date-${index}`}\n                className={`px-4 py-2 text-center text-xs font-bold uppercase tracking-wider transition-colors duration-200`}\n              >\n                {index + 1}\n              </th>\n            ))}\n          </tr>\n          <tr>\n            {/* 요일(문자) 렌더링 (이 부분은 거의 정확했습니다) */}\n            {scheduleData.DayInfo.map(({ dayString, isWeekend }, index) => (\n              <th\n                key={`day-${index}`}\n                className={`px-4 py-2 text-center text-xs font-bold uppercase tracking-wider border-b border-gray-200 transition-colors duration-200 ${\n                  isWeekend ? 'text-red-600' : 'text-gray-600'\n                }`}\n              >\n                {dayString}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody className='bg-white '>\n          {/* 3. ScheduleInfo가 객체이므로 Object.values()로 순회 */}\n          {scheduleData.WorkerData.map((worker, workerIndex) => {\n            if (worker.worker_ID < 4) {\n              return (\n                <tr key={`worker-${workerIndex}`}>\n                  {/* 근무자 이름 (고정 셀) */}\n                  <td className='sticky left-0 bg-gray-200 px-4 py-3 whitespace-nowrap text-sm font-semibold text-gray-900 z-10 border-r'>\n                    {worker.name}\n                  </td>\n                  {worker.scheduleTime.map((Time, dayIndex) => {\n                    return (\n                      <td\n                        key={`cell-${workerIndex}-${dayIndex}`}\n                        className='border-b'\n                        onDoubleClick={() => {\n                          summitVacation(\n                            shift,\n                            dayIndex + 1,\n                            worker.worker.name\n                          )\n                        }}\n                      >\n                        <div\n                          className={`w-full h-full flex items-center justify-center py-3 text-sm ${\n                            scheduleData.DayInfo[dayIndex].isWeekend ||\n                            scheduleData.DayInfo[dayIndex].isHoliday\n                              ? 'bg-red-50 text-red-700'\n                              : 'bg-white text-gray-700'\n                          }`}\n                        >\n                          {Time}\n                        </div>\n                      </td>\n                    )\n                  })}\n                </tr>\n              )\n            }\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default ScheduleTable\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}