{"ast":null,"code":"// 스케줄 표 컴포넌트\nimport{useState,useMemo,useEffect,useCallback}from'react';import ScheduleTable from'../Components/ScheduleTable';import{useAuth}from'../Contexts/Auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SchedulePage(){const{user}=useAuth();const[currentDate,setCurrentDate]=useState(new Date());const[scheduleData,setScheduleData]=useState(null);const currentYear=currentDate.getFullYear();const currentMonth=currentDate.getMonth();// 0-11\nconst getWorkers=useCallback(async()=>{const params=new URLSearchParams({year:currentDate.getFullYear(),month:currentDate.getMonth()+1});const result=await fetch(\"/api/getSchedule?\".concat(params));const data=await result.json();setScheduleData(data);});useEffect(()=>{console.log('이게 두번?');getWorkers();},[currentDate]);const goToPreviousMonth=()=>{setCurrentDate(new Date(currentYear,currentMonth-1,1));};const goToNextMonth=()=>{setCurrentDate(new Date(currentYear,currentMonth+1,1));};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen font-sans\",children:/*#__PURE__*/_jsx(\"main\",{className:\"p-4 sm:p-6 lg:p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:goToPreviousMonth,className:\"p-2 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-xl sm:text-2xl font-bold text-gray-800 w-40 sm:w-48 text-center mx-2\",children:[currentYear,\"\\uB144 \",currentMonth+1,\"\\uC6D4\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:goToNextMonth,className:\"p-2 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M9 5l7 7-7 7\"})})})]}),/*#__PURE__*/_jsx(ScheduleTable,{scheduleData:scheduleData,getWorkers:getWorkers}),user&&user.id<4&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex items-center justify-end space-x-4 text-sm text-gray-600\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-4 h-4 rounded-full mr-2 border \".concat(scheduleData&&scheduleData.WorkerData[parseInt(user.id)].remain_Day>=0?'bg-blue-100':'bg-red-100',\" border-blue-300\")}),scheduleData&&/*#__PURE__*/_jsx(\"span\",{children:\"\".concat(scheduleData.WorkerData[parseInt(user.id)].remain_Day>=0?'사용 가능한 대체 휴무 : '+scheduleData.WorkerData[parseInt(user.id)].remain_Day:'해야 할 대체 근무 : '+-scheduleData.WorkerData[parseInt(user.id)].remain_Day)})]})})]})})});}export default SchedulePage;","map":{"version":3,"names":["useState","useMemo","useEffect","useCallback","ScheduleTable","useAuth","jsx","_jsx","jsxs","_jsxs","SchedulePage","user","currentDate","setCurrentDate","Date","scheduleData","setScheduleData","currentYear","getFullYear","currentMonth","getMonth","getWorkers","params","URLSearchParams","year","month","result","fetch","concat","data","json","console","log","goToPreviousMonth","goToNextMonth","className","children","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","id","WorkerData","parseInt","remain_Day"],"sources":["/Users/HJ/Desktop/projectes/Renew_schedule/renew_schdule/client/src/pages/SchedulePage.jsx"],"sourcesContent":["// 스케줄 표 컴포넌트\nimport { useState, useMemo, useEffect, useCallback } from 'react'\nimport ScheduleTable from '../Components/ScheduleTable'\nimport { useAuth } from '../Contexts/Auth'\n\nfunction SchedulePage() {\n  const { user } = useAuth()\n  const [currentDate, setCurrentDate] = useState(new Date())\n  const [scheduleData, setScheduleData] = useState(null)\n\n  const currentYear = currentDate.getFullYear()\n  const currentMonth = currentDate.getMonth() // 0-11\n\n  const getWorkers = useCallback(async () => {\n    const params = new URLSearchParams({\n      year: currentDate.getFullYear(),\n      month: currentDate.getMonth() + 1,\n    })\n    const result = await fetch(`/api/getSchedule?${params}`)\n    const data = await result.json()\n    setScheduleData(data)\n  })\n  useEffect(() => {\n    console.log('이게 두번?')\n    getWorkers()\n  }, [currentDate])\n\n  const goToPreviousMonth = () => {\n    setCurrentDate(new Date(currentYear, currentMonth - 1, 1))\n  }\n\n  const goToNextMonth = () => {\n    setCurrentDate(new Date(currentYear, currentMonth + 1, 1))\n  }\n\n  return (\n    <div className='bg-gray-50 min-h-screen font-sans'>\n      <main className='p-4 sm:p-6 lg:p-8'>\n        <div className='max-w-7xl mx-auto'>\n          <div className='flex justify-center items-center mb-6'>\n            <button\n              onClick={goToPreviousMonth}\n              className='p-2 rounded-full hover:bg-gray-200 transition-colors'\n            >\n              <svg\n                xmlns='http://www.w3.org/2000/svg'\n                className='h-6 w-6 text-gray-600'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth='2'\n                  d='M15 19l-7-7 7-7'\n                />\n              </svg>\n            </button>\n            <h1 className='text-xl sm:text-2xl font-bold text-gray-800 w-40 sm:w-48 text-center mx-2'>\n              {currentYear}년 {currentMonth + 1}월\n            </h1>\n            <button\n              onClick={goToNextMonth}\n              className='p-2 rounded-full hover:bg-gray-200 transition-colors'\n            >\n              <svg\n                xmlns='http://www.w3.org/2000/svg'\n                className='h-6 w-6 text-gray-600'\n                fill='none'\n                viewBox='0 0 24 24'\n                stroke='currentColor'\n              >\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth='2'\n                  d='M9 5l7 7-7 7'\n                />\n              </svg>\n            </button>\n          </div>\n\n          <ScheduleTable scheduleData={scheduleData} getWorkers={getWorkers} />\n\n          {user && user.id < 4 && (\n            <div className='mt-6 flex items-center justify-end space-x-4 text-sm text-gray-600'>\n              <div className='flex items-center'>\n                <span\n                  className={`w-4 h-4 rounded-full mr-2 border ${scheduleData && scheduleData.WorkerData[parseInt(user.id)].remain_Day >= 0 ? 'bg-blue-100' : 'bg-red-100'} border-blue-300`}\n                ></span>\n                {scheduleData && (\n                  <span>{`${scheduleData.WorkerData[parseInt(user.id)].remain_Day >= 0 ? '사용 가능한 대체 휴무 : ' + scheduleData.WorkerData[parseInt(user.id)].remain_Day : '해야 할 대체 근무 : ' + -scheduleData.WorkerData[parseInt(user.id)].remain_Day}`}</span>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default SchedulePage\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}